{% extends "maintenance/layout.html" %}
{% load tz %}
{% load static %}

{% block title %}
    Tasks
{% endblock %}
{% block head %}

{% endblock %}

{% block main %}
    <h2>Tasks</h2>
    <div style="margin-top:15px; height: 100px;">
        <a href="{% url 'createTask' %}" class="btn btn-sm btn-primary" style="float: left;">Create New Task</a>
    </div>
    {% if tasks %}
        <div class="table-responsive">
            <table class="table table-sm table-striped table-hover table-bordered">
                <thead>
                    <th>#</th>
                    <th>Building Name</th>
                    <th>Building Address</th>
                    <th>Building Manager</th>
                    <th>Team</th>
                    <th>Task</th>
                    <th>Date</th>
                    <th>Result</th>
                    <th>Materials</th>
                    <th>Description</th>
                    <th>Team Notes</th>
                    <th>Created</th>
                    <th>Closed</th>
                </thead>
                <tbody>
                    {% for task in tasks %}
                        <tr>
                            <td>{{ forloop.count }}</td>
                            <td>{{ task.building.name }}</td>
                            <td>{{ task.building.address }}</td>
                            <td>{{ task.building.manager }}</td>
                            <td>{{ task.team.name }}</td>
                            <td>{{ task.type.type }}</td>
                            <td>{{ task.date|localtime|date:"d/m/Y" }}</td>
                            <td>{{ task.result }}</td>
                            <td>{{ task.materials.name}}</td>
                            <td>{{ task.description}}</td>
                            <td>{{ task.notes}}</td>
                            <td>{{ task.created|localtime|date:"d/m/Y H:i:s"}}</td>
                            <td>{{ task.closed|localtime|date:"d/m/Y H:i:s"}}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div>
            <p>No tasks have been created so far. Click <strong>"Create New Task"</strong> button and add a new task.</p>
        </div>
    {% endif %}
{% endblock %}
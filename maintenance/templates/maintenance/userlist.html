{% extends "maintenance/layout.html" %}
{% load tz %}
{% load static %}

{% block title %}
    Buildings
{% endblock %}
{% block head %}
<script src="{% static 'maintenance/userlist.js' %}"></script>
{% endblock %}

{% block main %}
    <h2>Users</h2>
    <!-- <div style="margin-top:15px; height: 100px;">
        <a href="{% url 'addBuilding' %}" class="btn btn-sm btn-primary" style="float: left;">Add New Building</a>
    </div> -->
    {% if users %}
        <div class="alert json" style="display: none;"></div>
        <section id="usersTableSection">
        {%csrf_token%}
        <div class="table-responsive">
            <table class="table table-sm table-striped table-hover table-bordered">
                <thead style="text-align: center;">
                    <th>Nu.</th>
                    <th>Username</th>
                    <th>Fisrt Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Confirmed?</th>
                    <th>Team</th>
                    <th>Joined</th>
                    <th>Last Login</th>
                </thead>
                <tbody>
                    {% for user in users %}
                        <tr {% if not user.confirmed %} class="table-danger" {% endif %} style="vertical-align: middle;">
                            <td style="text-align: center;">{{ forloop.counter }}</td>
                            <td>{{ user.username }}</td>
                            <td>{{ user.first_name }}</td>
                            <td>{{ user.last_name }}</td>
                            <td>{{ user.email }}</td>
                            {% if user.confirmed %}
                                <td style="text-align: center;"><a href="javascript:void(0)" class="btn btn-sm btn-warning conf" data-confirm="{{ user.id }}">Unconfirm</a></td>
                            {% else %}
                                <td style="text-align: center;"><a href="javascript:void(0)" class="btn btn-sm btn-success conf" data-confirm="{{ user.id }}">Confirm</a></td>
                            {% endif %}
                            <td style="text-align: center;">{{ user.team.name }}</td>
                            <td style="text-align: center;">{{ user.date_joined|localtime|date:"d/m/Y H:i:s" }}</td>
                            <td style="text-align: center;">{{ user.last_login|localtime|date:"d/m/Y H:i:s" }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        </section>
    {% else %}
        <div>
            <p>No buildings have been added so far. Click <strong>"Add New Building"</strong> button and add a new building.</p>
        </div>
    {% endif %}
{% endblock %}